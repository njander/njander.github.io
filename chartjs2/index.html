<!doctype html>
<html>
	<head>
		<title>DSC Dashboard1</title>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js"></script>
		<meta name = "viewport" content = "initial-scale = 1, user-scalable = no">
		<script src="http://libs.cartocdn.com/cartodb.js/v3/cartodb.js"></script>
		<style>
			canvas{
			}
		</style>
	</head>
	<body>
		<canvas id="canvas" height="450" width="600"></canvas>


	<script>

		var sql = cartodb.SQL({ user: 'andrewjander' });
        sql.execute("Select num_projects, project_type FROM andrewjander.open_table").done(function(data) {
        	console.log(data)
        	var num_projects = [];
        	var project_type = [];
        	for (i in data.rows){
        		num_projects.push(data.rows[i].num_projects)
        		project_type.push(data.rows[i].project_type)
        	}
        	console.log(data)
			var BarChartData = {
				labels : ["GMP", "SRS", "Foundation", "RSS", "Accessibility"],
				datasets : [
					{
						fillColor : "rgba(150, 205, 205, 205)",
						strokeColor : "rgba(3,3,3,3)",
						data : num_projects
					},
				]
			
			}

			var myLine = new Chart(document.getElementById("canvas").getContext("2d")).Bar(BarChartData);
	   })
	</script>
	</body>
</html>
